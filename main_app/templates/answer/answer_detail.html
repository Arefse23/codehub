{% extends 'base.html' %} 
{% block content %}

<nav id="sub-nav">
  <ul class="blue-text">
      <li> 
        <a class="btn grey darken-4" href="{% url 'question_detail' answer.question.id %}">
          <i class="material-icons left">arrow_back_ios</i>
          Return to Question
        </a>
      </i>
  </ul>
</nav>

<h1>Answer Detail</h1>

<div class="card">
  <a href="/answer/{{answer.id}}" class="card-a">
    <div class="card-content ">
      <div class="flex-container">
        <div>
          <span class="card-title">Title: {{ answer.title }}</span>
          
          <p>Body: {{ answer.body|safe}}</p>
          <p>Date: {{ answer.date }}</p>
         
  <div class="card-content ">
    <div class="flex-container">
      <div>
        <span class="card-title">Title: {{ answer.title }}</span>
        <p>Body: {{ answer.body|safe}}</p>
        <p>Date: {{ answer.date }}</p>
        {% load static %}
        <div class="profile-container profile-header comment">
          <img src="{% if answer.user.profile.avatar %}{% static answer.user.profile.avatar|cut:'main_app/static/' %}{% else %}{% static 'images/profile/guest.png' %}{% endif %}" style="vertical-align: middle;">
          <span>{{ answer.user.username }}</span>
        </div>
      </div>
    </div>
  </div>
  <div class="card-action">
    {% if user.is_authenticated %}
    {% if user.id is answer.user.id %}
    <a class="btn blue" href="{% url 'answer_update' answer.id %}">Edit</a>
    <a class="btn blue" href="{% url 'answer_delete' answer.id %}">Delete</a>
    {% endif %}
    {% endif %}


    <form action="{% url 'like_answer' answer.id %}" method="post" style="display: inline-block;">
      {% csrf_token %}
      {% if user in answer.likes.all %}
      <button type="submit" class="btn white black-text">
        <i class="material-icons right blue-text">thumb_up</i>
        {{ answer.likes.count }}
       </button>
      {% else %}
      <button type="submit" class="btn white black-text">
        <i class="material-icons right">thumb_up</i>
        {{ answer.likes.count }} 
      </button>
      {% endif %}
    </form>
    <form action="{% url 'dislike_answer' answer.id %}" method="post" style="display: inline-block;">
      {% csrf_token %}
      {% if user in answer.dislikes.all %}
      <button type="submit" class="btn white black-text">
        <i class="material-icons right blue-text">thumb_down</i>
        {{ answer.dislikes.count }}
       </button>
      {% else %}
      <button type="submit" class="btn white black-text">
        <i class="material-icons right">thumb_down</i>
        {{ answer.dislikes.count }}
      </button>
      {% endif %}
    </form>
  </div>
</div>

<form action="{% url 'reply_create' answer.id %}" method="post">
  {% csrf_token %}
  {{ reply_form.media }}
  {{ reply_form }}
  <button type="submit" class="btn green">Add Reply</button>
</form>

<hr>
{% for reply in replies %}


<div class="card">
    <div class="card-content ">
      <div class="flex-container">
        <div>
          <span class="card-title">Title: {{ reply.title }}</span>
          <p>Body: {{ reply.body|safe}}</p>
          <p>Date: {{ reply.date }}</p>
          {% load static %}
          <div class="profile-container profile-header comment">
            <img src="{% if reply.user.profile.avatar %}{% static reply.user.profile.avatar|cut:'main_app/static/' %}{% else %}{% static 'images/profile/guest.png' %}{% endif %}" style="vertical-align: middle;">
            <span>{{ reply.user.username }}</span>
          </div>
        </div>
      </div>
    </div>
  <div class="card-action">
    <a class="btn blue" href="{% url 'reply_update' reply.id %}">Edit</a>
    <a class="btn blue" href="{% url 'reply_delete' reply.id %}">Delete</a>
  </div>
  </div>

{% endfor %}

{% endblock %}